# .spectra/verify.yaml — SPECTRA Wiring Verification Configuration
# Generated by spectra-init. Edit to match your project.
# Docs: see SPECTRA_METHOD.md Section 15

project:
  # Directories containing source code (not tests)
  source_dirs: []          # e.g. ["src/", "lib/", "ralph/"]
  # Directories containing tests
  test_dirs: ["tests/"]
  # Files that serve as application entry points (where wiring must trace to)
  entry_points: []         # e.g. ["src/server.py", "src/index.ts", "src/main.go"]
  # Primary language
  language: ""             # python | typescript | javascript | go | rust

rules:
  # Wiring: every new public function must be reachable from entry_points
  wiring:
    enabled: true
    # Patterns to ignore (private functions, test helpers, etc.)
    ignore_patterns: ["_*", "test_*", "conftest*", "__*"]

  # Framework-specific anti-pattern checks
  # Add patterns that catch common mistakes in your stack
  framework_checks: []
    # Example for FastAPI:
    # - name: "no-flask-tuple-returns"
    #   pattern: 'return\s+\{.*\},\s*\d{3}'
    #   paths: ["src/"]
    #   severity: error
    #   message: "Flask-style tuple return in FastAPI — use JSONResponse"
    #
    # Example for Express:
    # - name: "no-callback-in-async"
    #   pattern: 'function\s*\(req,\s*res,\s*next\)\s*\{'
    #   paths: ["src/routes/"]
    #   severity: warning
    #   message: "Callback-style handler — use async/await"

  # Constants/values that must exist (auto-populated from plan.md assertions)
  constants: []
    # Example:
    # - file: "src/config.py"
    #   pattern: "MODEL_NAME.*claude-sonnet-4-5"
    #   message: "Judge model must be Sonnet 4.5"

  # Write abstraction enforcement
  write_guard:
    enabled: false
    # abstraction: "safe_write"           # The function/method that MUST be used
    # raw_pattern: 'db\.collection.*\.(set|add|update|delete)'  # Raw pattern to flag
    # exclude_files: ["write_queue.py"]   # Files where raw access IS allowed
    # message: "Direct DB write — must use safe_write()"

  # Signs file — learned constraints auto-parsed into rules
  signs_file: ""           # e.g. "src/guardrails.md"
